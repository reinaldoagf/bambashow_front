<div class=" header bg-danger pb-6">
    <div class=" container-fluid">
        <div class=" header-body">
            <div class=" row align-items-center py-4">
                <div class=" col-lg-6 col-7">
                    <h6 class=" h2 text-white d-inline-block mb-0">{{order.id ? 'Actualizar pedido' : 'Crear pedido'}}</h6>
                </div>
            </div>
        </div>
    </div>
</div>
<div class=" container-fluid mt--15">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class=" card mb-4">
                <div class=" card-header">
                    <h3 class=" mb-0">Formulario</h3>
                </div>
                <div class=" card-body">
                    <div class=" form-group">
                        <label class=" form-control-label" for="message">
                            Mensaje
                        </label>
                        <textarea class=" form-control" id="message" placeholder="Mensaje"
                            type="text" [(ngModel)]="order.message">
                        </textarea>
                    </div>
                    <div class=" form-group">
                        <label class=" form-control-label" for="providers">
                            Proveedores
                        </label>
                        <ng-multiselect-dropdown
                            name="provider"
                            [placeholder]="'Proveedores'"
                            [data]="providers"
                            [(ngModel)]="order.id_provider"
                            [settings]="providersDropdownSettings"
                            (onSelect)="onItemSelect($event)"
                            [disabled]="false">
                        </ng-multiselect-dropdown>
                    </div>
                    <div class="items__wrapper" >
                        <ng-container *ngFor="let item of order.items; index as i">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class=" form-group">
                                        <label class=" form-control-label" for="raw-material">
                                            Materia prima
                                        </label>
                                        <!-- name="raw-material" -->
                                        <ng-multiselect-dropdown
                                            [placeholder]="'Materia prima'"
                                            [settings]="rawMaterialDropdownSettings"
                                            [data]="rawMaterialOptions"
                                            [(ngModel)]="item.id_raw_material"
                                            (onSelect)="onItemSelect($event)"
                                            [disabled]="order.items.length > (i + 1)">
                                        </ng-multiselect-dropdown>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <label class=" form-control-label" for="quantity">
                                        Cantidad
                                    </label>
                                    <input class=" form-control" id="quantity" placeholder="Cantidad"
                                        type="number" min="1" [(ngModel)]="item.quantity" [disabled]="order.items.length > (i + 1)"/>
                                </div>
                                <div class="col-md-2">
                                    <label class=" form-control-label" for="square_meter">
                                        Metros cuadrados
                                    </label>
                                    <input class=" form-control" id="square_meter" placeholder="Metros cuadrados"
                                        type="number" [(ngModel)]="item.square_meter" [disabled]="order.items.length > (i + 1)"/>
                                </div>
                                <div class="col-md-2 d-flex justify-content-center align-items-center">
                                    <button class="btn btn-danger" (click)="removeItem(item)">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                    <div class="d-flex justify-content-end" >
                            <button class="btn btn-success" (click)="addItem()">
                                Agregar elemento
                                <i class="fa fa-plus"></i>
                            </button>
                    </div>
                </div>
                
                <div class="card-footer justify-content-end">
                    <button type="submit" class="btn btn-primary" (click)="save()"> {{order.id ? 'Actualizar' : 'Crear'}} </button>
                </div>
            </div>
        </div>
    </div>
</div>